{"$message_type":"diagnostic","message":"method `save_identity` has an incompatible type for trait","code":{"code":"E0053","explanation":"The parameters of any trait method must match between a trait implementation\nand the trait definition.\n\nErroneous code example:\n\n```compile_fail,E0053\ntrait Foo {\n    fn foo(x: u16);\n    fn bar(&self);\n}\n\nstruct Bar;\n\nimpl Foo for Bar {\n    // error, expected u16, found i16\n    fn foo(x: i16) { }\n\n    // error, types differ in mutability\n    fn bar(&mut self) { }\n}\n```\n"},"level":"error","spans":[{"file_name":"src/stores.rs","byte_start":9933,"byte_end":9954,"line_start":229,"line_end":229,"column_start":1,"column_end":22,"is_primary":true,"text":[{"text":"#[async_trait(?Send)]","highlight_start":1,"highlight_end":22}],"label":"expected `libsignal_protocol::IdentityChange`, found `bool`","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"src/stores.rs","byte_start":9933,"byte_end":9954,"line_start":229,"line_end":229,"column_start":1,"column_end":22,"is_primary":false,"text":[{"text":"#[async_trait(?Send)]","highlight_start":1,"highlight_end":22}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"#[async_trait]","def_site_span":{"file_name":"/Users/jasonconigliari/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/async-trait-0.1.89/src/lib.rs","byte_start":7473,"byte_end":7545,"line_start":252,"line_end":252,"column_start":1,"column_end":73,"is_primary":false,"text":[{"text":"pub fn async_trait(args: TokenStream, input: TokenStream) -> TokenStream {","highlight_start":1,"highlight_end":73}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}}],"children":[{"message":"expected signature `fn(&'life0 mut stores::BrowserSignalStore, &'life1 libsignal_protocol::ProtocolAddress, &'life2 libsignal_protocol::IdentityKey) -> std::pin::Pin<std::boxed::Box<(dyn std::future::Future<Output = std::result::Result<libsignal_protocol::IdentityChange, libsignal_protocol::SignalProtocolError>> + 'async_trait)>>`\n   found signature `fn(&'life0 mut stores::BrowserSignalStore, &'life1 libsignal_protocol::ProtocolAddress, &'life2 libsignal_protocol::IdentityKey) -> std::pin::Pin<std::boxed::Box<(dyn std::future::Future<Output = std::result::Result<bool, libsignal_protocol::SignalProtocolError>> + 'async_trait)>>`","code":null,"level":"note","spans":[],"children":[],"rendered":null},{"message":"change the output type to match the trait","code":null,"level":"help","spans":[{"file_name":"src/stores.rs","byte_start":9933,"byte_end":9954,"line_start":229,"line_end":229,"column_start":1,"column_end":22,"is_primary":true,"text":[{"text":"#[async_trait(?Send)]","highlight_start":1,"highlight_end":22}],"label":null,"suggested_replacement":"std::pin::Pin<std::boxed::Box<(dyn std::future::Future<Output = std::result::Result<libsignal_protocol::IdentityChange, libsignal_protocol::SignalProtocolError>> + 'async_trait)>>","suggestion_applicability":"MachineApplicable","expansion":{"span":{"file_name":"src/stores.rs","byte_start":9933,"byte_end":9954,"line_start":229,"line_end":229,"column_start":1,"column_end":22,"is_primary":false,"text":[{"text":"#[async_trait(?Send)]","highlight_start":1,"highlight_end":22}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"#[async_trait]","def_site_span":{"file_name":"/Users/jasonconigliari/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/async-trait-0.1.89/src/lib.rs","byte_start":7473,"byte_end":7545,"line_start":252,"line_end":252,"column_start":1,"column_end":73,"is_primary":false,"text":[{"text":"pub fn async_trait(args: TokenStream, input: TokenStream) -> TokenStream {","highlight_start":1,"highlight_end":73}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}}],"children":[],"rendered":null}],"rendered":"\u001b[1m\u001b[91merror[E0053]\u001b[0m\u001b[1m: method `save_identity` has an incompatible type for trait\u001b[0m\n   \u001b[1m\u001b[94m--> \u001b[0msrc/stores.rs:229:1\n    \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m229\u001b[0m \u001b[1m\u001b[94m|\u001b[0m #[async_trait(?Send)]\n    \u001b[1m\u001b[94m|\u001b[0m \u001b[1m\u001b[91m^^^^^^^^^^^^^^^^^^^^^\u001b[0m \u001b[1m\u001b[91mexpected `libsignal_protocol::IdentityChange`, found `bool`\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m\n    \u001b[1m\u001b[94m= \u001b[0m\u001b[1mnote\u001b[0m: expected signature `fn(&'life0 mut stores::BrowserSignalStore, &'life1 libsignal_protocol::ProtocolAddress, &'life2 libsignal_protocol::IdentityKey) -> std::pin::Pin<std::boxed::Box<\u001b[1m\u001b[35m(dyn std::future::Future<Output = std::result::Result<libsignal_protocol::IdentityChange, libsignal_protocol::SignalProtocolError>> + 'async_trait)\u001b[0m>>`\n               found signature `fn(&'life0 mut stores::BrowserSignalStore, &'life1 libsignal_protocol::ProtocolAddress, &'life2 libsignal_protocol::IdentityKey) -> std::pin::Pin<std::boxed::Box<\u001b[1m\u001b[35m(dyn std::future::Future<Output = std::result::Result<bool, libsignal_protocol::SignalProtocolError>> + 'async_trait)\u001b[0m>>`\n    \u001b[1m\u001b[94m= \u001b[0m\u001b[1mnote\u001b[0m: this error originates in the attribute macro `async_trait` (in Nightly builds, run with -Z macro-backtrace for more info)\n\u001b[1m\u001b[96mhelp\u001b[0m: change the output type to match the trait\n    \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m229\u001b[0m \u001b[91m- #[async_trait(?Send)]\u001b[0m\n\u001b[1m\u001b[94m229\u001b[0m \u001b[92m+ std::pin::Pin<std::boxed::Box<(dyn std::future::Future<Output = std::result::Result<libsignal_protocol::IdentityChange, libsignal_protocol::SignalProtocolError>> + 'async_trait)>>\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"method `mark_kyber_pre_key_used` has 2 parameters but the declaration in trait `libsignal_protocol::KyberPreKeyStore::mark_kyber_pre_key_used` has 4","code":{"code":"E0050","explanation":"An attempted implementation of a trait method has the wrong number of function\nparameters.\n\nErroneous code example:\n\n```compile_fail,E0050\ntrait Foo {\n    fn foo(&self, x: u8) -> bool;\n}\n\nstruct Bar;\n\n// error: method `foo` has 1 parameter but the declaration in trait `Foo::foo`\n// has 2\nimpl Foo for Bar {\n    fn foo(&self) -> bool { true }\n}\n```\n\nFor example, the `Foo` trait has a method `foo` with two function parameters\n(`&self` and `u8`), but the implementation of `foo` for the type `Bar` omits\nthe `u8` parameter. To fix this error, they must have the same parameters:\n\n```\ntrait Foo {\n    fn foo(&self, x: u8) -> bool;\n}\n\nstruct Bar;\n\nimpl Foo for Bar {\n    fn foo(&self, x: u8) -> bool { // ok!\n        true\n    }\n}\n```\n"},"level":"error","spans":[{"file_name":"src/stores.rs","byte_start":14793,"byte_end":14834,"line_start":372,"line_end":372,"column_start":38,"column_end":79,"is_primary":true,"text":[{"text":"    async fn mark_kyber_pre_key_used(&mut self, kyber_prekey_id: KyberPreKeyId) -> StoreResult<()> {","highlight_start":38,"highlight_end":79}],"label":"expected 4 parameters, found 2","suggested_replacement":null,"suggestion_applicability":null,"expansion":null}],"children":[{"message":"`mark_kyber_pre_key_used` from trait: `fn(&'life0 mut Self, libsignal_protocol::KyberPreKeyId, libsignal_protocol::SignedPreKeyId, &'life1 libsignal_protocol::PublicKey) -> std::pin::Pin<std::boxed::Box<(dyn std::future::Future<Output = std::result::Result<(), libsignal_protocol::SignalProtocolError>> + 'async_trait)>>`","code":null,"level":"note","spans":[],"children":[],"rendered":null}],"rendered":"\u001b[1m\u001b[91merror[E0050]\u001b[0m\u001b[1m: method `mark_kyber_pre_key_used` has 2 parameters but the declaration in trait `libsignal_protocol::KyberPreKeyStore::mark_kyber_pre_key_used` has 4\u001b[0m\n   \u001b[1m\u001b[94m--> \u001b[0msrc/stores.rs:372:38\n    \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m372\u001b[0m \u001b[1m\u001b[94m|\u001b[0m     async fn mark_kyber_pre_key_used(&mut self, kyber_prekey_id: KyberPreKeyId) -> StoreResult<()> {\n    \u001b[1m\u001b[94m|\u001b[0m                                      \u001b[1m\u001b[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\u001b[0m \u001b[1m\u001b[91mexpected 4 parameters, found 2\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m\n    \u001b[1m\u001b[94m= \u001b[0m\u001b[1mnote\u001b[0m: `mark_kyber_pre_key_used` from trait: `\u001b[1m\u001b[35mfn(&'life0 mut Self, libsignal_protocol::KyberPreKeyId, libsignal_protocol::SignedPreKeyId, &'life1 libsignal_protocol::PublicKey) -> std::pin::Pin<std::boxed::Box<(dyn std::future::Future<Output = std::result::Result<(), libsignal_protocol::SignalProtocolError>> + 'async_trait)>>\u001b[0m`\n\n"}
{"$message_type":"diagnostic","message":"aborting due to 2 previous errors","code":null,"level":"error","spans":[],"children":[],"rendered":"\u001b[1m\u001b[91merror\u001b[0m\u001b[1m: aborting due to 2 previous errors\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"Some errors have detailed explanations: E0050, E0053.","code":null,"level":"failure-note","spans":[],"children":[],"rendered":"\u001b[1mSome errors have detailed explanations: E0050, E0053.\u001b[0m\n"}
{"$message_type":"diagnostic","message":"For more information about an error, try `rustc --explain E0050`.","code":null,"level":"failure-note","spans":[],"children":[],"rendered":"\u001b[1mFor more information about an error, try `rustc --explain E0050`.\u001b[0m\n"}
