{"$message_type":"diagnostic","message":"use of deprecated function `SignalSession::new::{closure#0}::_::constructor`: async constructors produce invalid TS code and support will be removed in the future","code":{"code":"deprecated","explanation":null},"level":"warning","spans":[{"file_name":"src/lib.rs","byte_start":3444,"byte_end":3447,"line_start":115,"line_end":115,"column_start":18,"column_end":21,"is_primary":true,"text":[{"text":"    pub async fn new(prekey_bundle_json: &str) -> Result<SignalSession, JsValue> {","highlight_start":18,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}],"children":[{"message":"`#[warn(deprecated)]` on by default","code":null,"level":"note","spans":[],"children":[],"rendered":null}],"rendered":"\u001b[1m\u001b[33mwarning\u001b[0m\u001b[1m: use of deprecated function `SignalSession::new::{closure#0}::_::constructor`: async constructors produce invalid TS code and support will be removed in the future\u001b[0m\n   \u001b[1m\u001b[94m--> \u001b[0msrc/lib.rs:115:18\n    \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m115\u001b[0m \u001b[1m\u001b[94m|\u001b[0m     pub async fn new(prekey_bundle_json: &str) -> Result<SignalSession, JsValue> {\n    \u001b[1m\u001b[94m|\u001b[0m                  \u001b[1m\u001b[33m^^^\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m\n    \u001b[1m\u001b[94m= \u001b[0m\u001b[1mnote\u001b[0m: `#[warn(deprecated)]` on by default\n\n"}
{"$message_type":"diagnostic","message":"mismatched types","code":{"code":"E0308","explanation":"Expected type did not match the received type.\n\nErroneous code examples:\n\n```compile_fail,E0308\nfn plus_one(x: i32) -> i32 {\n    x + 1\n}\n\nplus_one(\"Not a number\");\n//       ^^^^^^^^^^^^^^ expected `i32`, found `&str`\n\nif \"Not a bool\" {\n// ^^^^^^^^^^^^ expected `bool`, found `&str`\n}\n\nlet x: f32 = \"Not a float\";\n//     ---   ^^^^^^^^^^^^^ expected `f32`, found `&str`\n//     |\n//     expected due to this\n```\n\nThis error occurs when an expression was used in a place where the compiler\nexpected an expression of a different type. It can occur in several cases, the\nmost common being when calling a function and passing an argument which has a\ndifferent type than the matching type in the function declaration.\n"},"level":"error","spans":[{"file_name":"src/lib.rs","byte_start":15632,"byte_end":15647,"line_start":423,"line_end":423,"column_start":13,"column_end":28,"is_primary":true,"text":[{"text":"            &sender_key_msg,","highlight_start":13,"highlight_end":28}],"label":"expected `&[u8]`, found `&SenderKeyMessage`","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"src/lib.rs","byte_start":15605,"byte_end":15618,"line_start":422,"line_end":422,"column_start":9,"column_end":22,"is_primary":false,"text":[{"text":"        group_decrypt(","highlight_start":9,"highlight_end":22}],"label":"arguments to this function are incorrect","suggested_replacement":null,"suggestion_applicability":null,"expansion":null}],"children":[{"message":"expected reference `&[u8]`\n   found reference `&libsignal_protocol::SenderKeyMessage`","code":null,"level":"note","spans":[],"children":[],"rendered":null},{"message":"function defined here","code":null,"level":"note","spans":[{"file_name":"/Users/jasonconigliari/.cargo/git/checkouts/libsignal-2a193a9867decbc4/4cd2c50/rust/protocol/src/group_cipher.rs","byte_start":4040,"byte_end":4053,"line_start":124,"line_end":124,"column_start":14,"column_end":27,"is_primary":true,"text":[{"text":"pub async fn group_decrypt(","highlight_start":14,"highlight_end":27}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}],"children":[],"rendered":null}],"rendered":"\u001b[1m\u001b[91merror[E0308]\u001b[0m\u001b[1m: mismatched types\u001b[0m\n   \u001b[1m\u001b[94m--> \u001b[0msrc/lib.rs:423:13\n    \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m422\u001b[0m \u001b[1m\u001b[94m|\u001b[0m         group_decrypt(\n    \u001b[1m\u001b[94m|\u001b[0m         \u001b[1m\u001b[94m-------------\u001b[0m \u001b[1m\u001b[94marguments to this function are incorrect\u001b[0m\n\u001b[1m\u001b[94m423\u001b[0m \u001b[1m\u001b[94m|\u001b[0m             &sender_key_msg,\n    \u001b[1m\u001b[94m|\u001b[0m             \u001b[1m\u001b[91m^^^^^^^^^^^^^^^\u001b[0m \u001b[1m\u001b[91mexpected `&[u8]`, found `&SenderKeyMessage`\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m\n    \u001b[1m\u001b[94m= \u001b[0m\u001b[1mnote\u001b[0m: expected reference `&\u001b[1m\u001b[35m[u8]\u001b[0m`\n               found reference `&\u001b[1m\u001b[35mlibsignal_protocol::SenderKeyMessage\u001b[0m`\n\u001b[1m\u001b[92mnote\u001b[0m: function defined here\n   \u001b[1m\u001b[94m--> \u001b[0m/Users/jasonconigliari/.cargo/git/checkouts/libsignal-2a193a9867decbc4/4cd2c50/rust/protocol/src/group_cipher.rs:124:14\n    \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m124\u001b[0m \u001b[1m\u001b[94m|\u001b[0m pub async fn group_decrypt(\n    \u001b[1m\u001b[94m|\u001b[0m              \u001b[1m\u001b[92m^^^^^^^^^^^^^\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"the method `serialize` exists for reference `&SignedPreKeyRecord`, but its trait bounds were not satisfied","code":{"code":"E0599","explanation":"This error occurs when a method is used on a type which doesn't implement it:\n\nErroneous code example:\n\n```compile_fail,E0599\nstruct Mouth;\n\nlet x = Mouth;\nx.chocolate(); // error: no method named `chocolate` found for type `Mouth`\n               //        in the current scope\n```\n\nIn this case, you need to implement the `chocolate` method to fix the error:\n\n```\nstruct Mouth;\n\nimpl Mouth {\n    fn chocolate(&self) { // We implement the `chocolate` method here.\n        println!(\"Hmmm! I love chocolate!\");\n    }\n}\n\nlet x = Mouth;\nx.chocolate(); // ok!\n```\n"},"level":"error","spans":[{"file_name":"src/stores.rs","byte_start":4759,"byte_end":4768,"line_start":115,"line_end":115,"column_start":52,"column_end":61,"is_primary":true,"text":[{"text":"                .map(|(k, v)| (*k, BASE64.encode(v.serialize().expect(\"serialize signed_prekey\"))))","highlight_start":52,"highlight_end":61}],"label":"method cannot be called on `&SignedPreKeyRecord` due to unsatisfied trait bounds","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/jasonconigliari/.cargo/git/checkouts/libsignal-2a193a9867decbc4/4cd2c50/rust/protocol/src/state/signed_prekey.rs","byte_start":689,"byte_end":718,"line_start":27,"line_end":27,"column_start":1,"column_end":30,"is_primary":false,"text":[{"text":"pub struct SignedPreKeyRecord {","highlight_start":1,"highlight_end":30}],"label":"doesn't satisfy `SignedPreKeyRecord: Serialize`","suggested_replacement":null,"suggestion_applicability":null,"expansion":null}],"children":[{"message":"the following trait bounds were not satisfied:\n`SignedPreKeyRecord: Serialize`\nwhich is required by `&SignedPreKeyRecord: Serialize`","code":null,"level":"note","spans":[],"children":[],"rendered":null},{"message":"items from traits can only be used if the trait is in scope","code":null,"level":"help","spans":[],"children":[],"rendered":null},{"message":"trait `GenericSignedPreKey` which provides `serialize` is implemented but not in scope; perhaps you want to import it","code":null,"level":"help","spans":[{"file_name":"src/stores.rs","byte_start":173,"byte_end":173,"line_start":6,"line_end":6,"column_start":1,"column_end":1,"is_primary":true,"text":[{"text":"use async_trait::async_trait;","highlight_start":1,"highlight_end":1}],"label":null,"suggested_replacement":"use libsignal_protocol::GenericSignedPreKey;\n","suggestion_applicability":"MaybeIncorrect","expansion":null}],"children":[],"rendered":null}],"rendered":"\u001b[1m\u001b[91merror[E0599]\u001b[0m\u001b[1m: the method `serialize` exists for reference `&SignedPreKeyRecord`, but its trait bounds were not satisfied\u001b[0m\n   \u001b[1m\u001b[94m--> \u001b[0msrc/stores.rs:115:52\n    \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m115\u001b[0m \u001b[1m\u001b[94m|\u001b[0m                 .map(|(k, v)| (*k, BASE64.encode(v.serialize().expect(\"serialize signed_prekey\"))))\n    \u001b[1m\u001b[94m|\u001b[0m                                                    \u001b[1m\u001b[91m^^^^^^^^^\u001b[0m \u001b[1m\u001b[91mmethod cannot be called on `&SignedPreKeyRecord` due to unsatisfied trait bounds\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m\n   \u001b[1m\u001b[94m::: \u001b[0m/Users/jasonconigliari/.cargo/git/checkouts/libsignal-2a193a9867decbc4/4cd2c50/rust/protocol/src/state/signed_prekey.rs:27:1\n    \u001b[1m\u001b[94m|\u001b[0m\n \u001b[1m\u001b[94m27\u001b[0m \u001b[1m\u001b[94m|\u001b[0m pub struct SignedPreKeyRecord {\n    \u001b[1m\u001b[94m|\u001b[0m \u001b[1m\u001b[94m-----------------------------\u001b[0m \u001b[1m\u001b[94mdoesn't satisfy `SignedPreKeyRecord: Serialize`\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m\n    \u001b[1m\u001b[94m= \u001b[0m\u001b[1mnote\u001b[0m: the following trait bounds were not satisfied:\n            `SignedPreKeyRecord: Serialize`\n            which is required by `&SignedPreKeyRecord: Serialize`\n    \u001b[1m\u001b[94m= \u001b[0m\u001b[1mhelp\u001b[0m: items from traits can only be used if the trait is in scope\n\u001b[1m\u001b[96mhelp\u001b[0m: trait `GenericSignedPreKey` which provides `serialize` is implemented but not in scope; perhaps you want to import it\n    \u001b[1m\u001b[94m|\u001b[0m\n  \u001b[1m\u001b[94m6\u001b[0m \u001b[92m+ use libsignal_protocol::GenericSignedPreKey;\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"the method `serialize` exists for reference `&KyberPreKeyRecord`, but its trait bounds were not satisfied","code":{"code":"E0599","explanation":"This error occurs when a method is used on a type which doesn't implement it:\n\nErroneous code example:\n\n```compile_fail,E0599\nstruct Mouth;\n\nlet x = Mouth;\nx.chocolate(); // error: no method named `chocolate` found for type `Mouth`\n               //        in the current scope\n```\n\nIn this case, you need to implement the `chocolate` method to fix the error:\n\n```\nstruct Mouth;\n\nimpl Mouth {\n    fn chocolate(&self) { // We implement the `chocolate` method here.\n        println!(\"Hmmm! I love chocolate!\");\n    }\n}\n\nlet x = Mouth;\nx.chocolate(); // ok!\n```\n"},"level":"error","spans":[{"file_name":"src/stores.rs","byte_start":4952,"byte_end":4961,"line_start":119,"line_end":119,"column_start":52,"column_end":61,"is_primary":true,"text":[{"text":"                .map(|(k, v)| (*k, BASE64.encode(v.serialize().expect(\"serialize kyber_prekey\"))))","highlight_start":52,"highlight_end":61}],"label":"method cannot be called on `&KyberPreKeyRecord` due to unsatisfied trait bounds","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/jasonconigliari/.cargo/git/checkouts/libsignal-2a193a9867decbc4/4cd2c50/rust/protocol/src/state/kyber_prekey.rs","byte_start":662,"byte_end":690,"line_start":27,"line_end":27,"column_start":1,"column_end":29,"is_primary":false,"text":[{"text":"pub struct KyberPreKeyRecord {","highlight_start":1,"highlight_end":29}],"label":"doesn't satisfy `KyberPreKeyRecord: Serialize`","suggested_replacement":null,"suggestion_applicability":null,"expansion":null}],"children":[{"message":"the following trait bounds were not satisfied:\n`KyberPreKeyRecord: Serialize`\nwhich is required by `&KyberPreKeyRecord: Serialize`","code":null,"level":"note","spans":[],"children":[],"rendered":null},{"message":"items from traits can only be used if the trait is in scope","code":null,"level":"help","spans":[],"children":[],"rendered":null},{"message":"trait `GenericSignedPreKey` which provides `serialize` is implemented but not in scope; perhaps you want to import it","code":null,"level":"help","spans":[{"file_name":"src/stores.rs","byte_start":173,"byte_end":173,"line_start":6,"line_end":6,"column_start":1,"column_end":1,"is_primary":true,"text":[{"text":"use async_trait::async_trait;","highlight_start":1,"highlight_end":1}],"label":null,"suggested_replacement":"use libsignal_protocol::GenericSignedPreKey;\n","suggestion_applicability":"MaybeIncorrect","expansion":null}],"children":[],"rendered":null}],"rendered":"\u001b[1m\u001b[91merror[E0599]\u001b[0m\u001b[1m: the method `serialize` exists for reference `&KyberPreKeyRecord`, but its trait bounds were not satisfied\u001b[0m\n   \u001b[1m\u001b[94m--> \u001b[0msrc/stores.rs:119:52\n    \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m119\u001b[0m \u001b[1m\u001b[94m|\u001b[0m                 .map(|(k, v)| (*k, BASE64.encode(v.serialize().expect(\"serialize kyber_prekey\"))))\n    \u001b[1m\u001b[94m|\u001b[0m                                                    \u001b[1m\u001b[91m^^^^^^^^^\u001b[0m \u001b[1m\u001b[91mmethod cannot be called on `&KyberPreKeyRecord` due to unsatisfied trait bounds\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m\n   \u001b[1m\u001b[94m::: \u001b[0m/Users/jasonconigliari/.cargo/git/checkouts/libsignal-2a193a9867decbc4/4cd2c50/rust/protocol/src/state/kyber_prekey.rs:27:1\n    \u001b[1m\u001b[94m|\u001b[0m\n \u001b[1m\u001b[94m27\u001b[0m \u001b[1m\u001b[94m|\u001b[0m pub struct KyberPreKeyRecord {\n    \u001b[1m\u001b[94m|\u001b[0m \u001b[1m\u001b[94m----------------------------\u001b[0m \u001b[1m\u001b[94mdoesn't satisfy `KyberPreKeyRecord: Serialize`\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m\n    \u001b[1m\u001b[94m= \u001b[0m\u001b[1mnote\u001b[0m: the following trait bounds were not satisfied:\n            `KyberPreKeyRecord: Serialize`\n            which is required by `&KyberPreKeyRecord: Serialize`\n    \u001b[1m\u001b[94m= \u001b[0m\u001b[1mhelp\u001b[0m: items from traits can only be used if the trait is in scope\n\u001b[1m\u001b[96mhelp\u001b[0m: trait `GenericSignedPreKey` which provides `serialize` is implemented but not in scope; perhaps you want to import it\n    \u001b[1m\u001b[94m|\u001b[0m\n  \u001b[1m\u001b[94m6\u001b[0m \u001b[92m+ use libsignal_protocol::GenericSignedPreKey;\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"no method named `as_ref` found for struct `DeviceId` in the current scope","code":{"code":"E0599","explanation":"This error occurs when a method is used on a type which doesn't implement it:\n\nErroneous code example:\n\n```compile_fail,E0599\nstruct Mouth;\n\nlet x = Mouth;\nx.chocolate(); // error: no method named `chocolate` found for type `Mouth`\n               //        in the current scope\n```\n\nIn this case, you need to implement the `chocolate` method to fix the error:\n\n```\nstruct Mouth;\n\nimpl Mouth {\n    fn chocolate(&self) { // We implement the `chocolate` method here.\n        println!(\"Hmmm! I love chocolate!\");\n    }\n}\n\nlet x = Mouth;\nx.chocolate(); // ok!\n```\n"},"level":"error","spans":[{"file_name":"src/stores.rs","byte_start":5342,"byte_end":5348,"line_start":126,"line_end":126,"column_start":60,"column_end":66,"is_primary":true,"text":[{"text":"            cli_address_device_id: cli_address.device_id().as_ref().to_owned(),","highlight_start":60,"highlight_end":66}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}],"children":[{"message":"there is a method `classify_ref` with a similar name","code":null,"level":"help","spans":[{"file_name":"src/stores.rs","byte_start":5342,"byte_end":5348,"line_start":126,"line_end":126,"column_start":60,"column_end":66,"is_primary":true,"text":[{"text":"            cli_address_device_id: cli_address.device_id().as_ref().to_owned(),","highlight_start":60,"highlight_end":66}],"label":null,"suggested_replacement":"classify_ref","suggestion_applicability":"MaybeIncorrect","expansion":null}],"children":[],"rendered":null}],"rendered":"\u001b[1m\u001b[91merror[E0599]\u001b[0m\u001b[1m: no method named `as_ref` found for struct `DeviceId` in the current scope\u001b[0m\n   \u001b[1m\u001b[94m--> \u001b[0msrc/stores.rs:126:60\n    \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m126\u001b[0m \u001b[1m\u001b[94m|\u001b[0m             cli_address_device_id: cli_address.device_id().as_ref().to_owned(),\n    \u001b[1m\u001b[94m|\u001b[0m                                                            \u001b[1m\u001b[91m^^^^^^\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[96mhelp\u001b[0m: there is a method `classify_ref` with a similar name\n    \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m126\u001b[0m \u001b[91m- \u001b[0m            cli_address_device_id: cli_address.device_id().\u001b[91mas_ref\u001b[0m().to_owned(),\n\u001b[1m\u001b[94m126\u001b[0m \u001b[92m+ \u001b[0m            cli_address_device_id: cli_address.device_id().\u001b[92mclassify_ref\u001b[0m().to_owned(),\n    \u001b[1m\u001b[94m|\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"no function or associated item named `deserialize` found for struct `SignedPreKeyRecord` in the current scope","code":{"code":"E0599","explanation":"This error occurs when a method is used on a type which doesn't implement it:\n\nErroneous code example:\n\n```compile_fail,E0599\nstruct Mouth;\n\nlet x = Mouth;\nx.chocolate(); // error: no method named `chocolate` found for type `Mouth`\n               //        in the current scope\n```\n\nIn this case, you need to implement the `chocolate` method to fix the error:\n\n```\nstruct Mouth;\n\nimpl Mouth {\n    fn chocolate(&self) { // We implement the `chocolate` method here.\n        println!(\"Hmmm! I love chocolate!\");\n    }\n}\n\nlet x = Mouth;\nx.chocolate(); // ok!\n```\n"},"level":"error","spans":[{"file_name":"src/stores.rs","byte_start":7378,"byte_end":7389,"line_start":167,"line_end":167,"column_start":46,"column_end":57,"is_primary":true,"text":[{"text":"            let record = SignedPreKeyRecord::deserialize(&bytes).map_err(|e| anyhow::anyhow!(\"signed_prekey parse: {e}\"))?;","highlight_start":46,"highlight_end":57}],"label":"function or associated item not found in `SignedPreKeyRecord`","suggested_replacement":null,"suggestion_applicability":null,"expansion":null}],"children":[{"message":"items from traits can only be used if the trait is in scope","code":null,"level":"help","spans":[],"children":[],"rendered":null},{"message":"there is a method `serialize` with a similar name, but with different arguments","code":null,"level":"help","spans":[{"file_name":"/Users/jasonconigliari/.cargo/git/checkouts/libsignal-2a193a9867decbc4/4cd2c50/rust/protocol/src/state/signed_prekey.rs","byte_start":2057,"byte_end":2095,"line_start":76,"line_end":76,"column_start":5,"column_end":43,"is_primary":true,"text":[{"text":"    fn serialize(&self) -> Result<Vec<u8>> {","highlight_start":5,"highlight_end":43}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}],"children":[],"rendered":null},{"message":"trait `GenericSignedPreKey` which provides `deserialize` is implemented but not in scope; perhaps you want to import it","code":null,"level":"help","spans":[{"file_name":"src/stores.rs","byte_start":173,"byte_end":173,"line_start":6,"line_end":6,"column_start":1,"column_end":1,"is_primary":true,"text":[{"text":"use async_trait::async_trait;","highlight_start":1,"highlight_end":1}],"label":null,"suggested_replacement":"use libsignal_protocol::GenericSignedPreKey;\n","suggestion_applicability":"MaybeIncorrect","expansion":null}],"children":[],"rendered":null}],"rendered":"\u001b[1m\u001b[91merror[E0599]\u001b[0m\u001b[1m: no function or associated item named `deserialize` found for struct `SignedPreKeyRecord` in the current scope\u001b[0m\n   \u001b[1m\u001b[94m--> \u001b[0msrc/stores.rs:167:46\n    \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m167\u001b[0m \u001b[1m\u001b[94m|\u001b[0m             let record = SignedPreKeyRecord::deserialize(&bytes).map_err(|e| anyhow::anyhow!(\"signed_prekey parse: {e}\"))?;\n    \u001b[1m\u001b[94m|\u001b[0m                                              \u001b[1m\u001b[91m^^^^^^^^^^^\u001b[0m \u001b[1m\u001b[91mfunction or associated item not found in `SignedPreKeyRecord`\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m\n    \u001b[1m\u001b[94m= \u001b[0m\u001b[1mhelp\u001b[0m: items from traits can only be used if the trait is in scope\n\u001b[1m\u001b[96mhelp\u001b[0m: there is a method `serialize` with a similar name, but with different arguments\n   \u001b[1m\u001b[94m--> \u001b[0m/Users/jasonconigliari/.cargo/git/checkouts/libsignal-2a193a9867decbc4/4cd2c50/rust/protocol/src/state/signed_prekey.rs:76:5\n    \u001b[1m\u001b[94m|\u001b[0m\n \u001b[1m\u001b[94m76\u001b[0m \u001b[1m\u001b[94m|\u001b[0m     fn serialize(&self) -> Result<Vec<u8>> {\n    \u001b[1m\u001b[94m|\u001b[0m     \u001b[1m\u001b[96m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\u001b[0m\n\u001b[1m\u001b[96mhelp\u001b[0m: trait `GenericSignedPreKey` which provides `deserialize` is implemented but not in scope; perhaps you want to import it\n    \u001b[1m\u001b[94m|\u001b[0m\n  \u001b[1m\u001b[94m6\u001b[0m \u001b[92m+ use libsignal_protocol::GenericSignedPreKey;\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"no function or associated item named `deserialize` found for struct `KyberPreKeyRecord` in the current scope","code":{"code":"E0599","explanation":"This error occurs when a method is used on a type which doesn't implement it:\n\nErroneous code example:\n\n```compile_fail,E0599\nstruct Mouth;\n\nlet x = Mouth;\nx.chocolate(); // error: no method named `chocolate` found for type `Mouth`\n               //        in the current scope\n```\n\nIn this case, you need to implement the `chocolate` method to fix the error:\n\n```\nstruct Mouth;\n\nimpl Mouth {\n    fn chocolate(&self) { // We implement the `chocolate` method here.\n        println!(\"Hmmm! I love chocolate!\");\n    }\n}\n\nlet x = Mouth;\nx.chocolate(); // ok!\n```\n"},"level":"error","spans":[{"file_name":"src/stores.rs","byte_start":7753,"byte_end":7764,"line_start":174,"line_end":174,"column_start":45,"column_end":56,"is_primary":true,"text":[{"text":"            let record = KyberPreKeyRecord::deserialize(&bytes).map_err(|e| anyhow::anyhow!(\"kyber_prekey parse: {e}\"))?;","highlight_start":45,"highlight_end":56}],"label":"function or associated item not found in `KyberPreKeyRecord`","suggested_replacement":null,"suggestion_applicability":null,"expansion":null}],"children":[{"message":"if you're trying to build a new `KyberPreKeyRecord`, consider using `KyberPreKeyRecord::generate` which returns `Result<KyberPreKeyRecord, SignalProtocolError>`","code":null,"level":"note","spans":[{"file_name":"/Users/jasonconigliari/.cargo/git/checkouts/libsignal-2a193a9867decbc4/4cd2c50/rust/protocol/src/state/kyber_prekey.rs","byte_start":1282,"byte_end":1432,"line_start":53,"line_end":57,"column_start":5,"column_end":35,"is_primary":true,"text":[{"text":"    pub fn generate(","highlight_start":5,"highlight_end":21},{"text":"        kyber_key_type: kem::KeyType,","highlight_start":1,"highlight_end":38},{"text":"        id: KyberPreKeyId,","highlight_start":1,"highlight_end":27},{"text":"        signing_key: &PrivateKey,","highlight_start":1,"highlight_end":34},{"text":"    ) -> Result<KyberPreKeyRecord> {","highlight_start":1,"highlight_end":35}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}],"children":[],"rendered":null},{"message":"items from traits can only be used if the trait is in scope","code":null,"level":"help","spans":[],"children":[],"rendered":null},{"message":"there is a method `serialize` with a similar name, but with different arguments","code":null,"level":"help","spans":[{"file_name":"/Users/jasonconigliari/.cargo/git/checkouts/libsignal-2a193a9867decbc4/4cd2c50/rust/protocol/src/state/signed_prekey.rs","byte_start":2057,"byte_end":2095,"line_start":76,"line_end":76,"column_start":5,"column_end":43,"is_primary":true,"text":[{"text":"    fn serialize(&self) -> Result<Vec<u8>> {","highlight_start":5,"highlight_end":43}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}],"children":[],"rendered":null},{"message":"trait `GenericSignedPreKey` which provides `deserialize` is implemented but not in scope; perhaps you want to import it","code":null,"level":"help","spans":[{"file_name":"src/stores.rs","byte_start":173,"byte_end":173,"line_start":6,"line_end":6,"column_start":1,"column_end":1,"is_primary":true,"text":[{"text":"use async_trait::async_trait;","highlight_start":1,"highlight_end":1}],"label":null,"suggested_replacement":"use libsignal_protocol::GenericSignedPreKey;\n","suggestion_applicability":"MaybeIncorrect","expansion":null}],"children":[],"rendered":null}],"rendered":"\u001b[1m\u001b[91merror[E0599]\u001b[0m\u001b[1m: no function or associated item named `deserialize` found for struct `KyberPreKeyRecord` in the current scope\u001b[0m\n   \u001b[1m\u001b[94m--> \u001b[0msrc/stores.rs:174:45\n    \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m174\u001b[0m \u001b[1m\u001b[94m|\u001b[0m             let record = KyberPreKeyRecord::deserialize(&bytes).map_err(|e| anyhow::anyhow!(\"kyber_prekey parse: {e}\"))?;\n    \u001b[1m\u001b[94m|\u001b[0m                                             \u001b[1m\u001b[91m^^^^^^^^^^^\u001b[0m \u001b[1m\u001b[91mfunction or associated item not found in `KyberPreKeyRecord`\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[92mnote\u001b[0m: if you're trying to build a new `KyberPreKeyRecord`, consider using `KyberPreKeyRecord::generate` which returns `Result<KyberPreKeyRecord, SignalProtocolError>`\n   \u001b[1m\u001b[94m--> \u001b[0m/Users/jasonconigliari/.cargo/git/checkouts/libsignal-2a193a9867decbc4/4cd2c50/rust/protocol/src/state/kyber_prekey.rs:53:5\n    \u001b[1m\u001b[94m|\u001b[0m\n \u001b[1m\u001b[94m53\u001b[0m \u001b[1m\u001b[94m|\u001b[0m \u001b[1m\u001b[92m/\u001b[0m     pub fn generate(\n \u001b[1m\u001b[94m54\u001b[0m \u001b[1m\u001b[94m|\u001b[0m \u001b[1m\u001b[92m|\u001b[0m         kyber_key_type: kem::KeyType,\n \u001b[1m\u001b[94m55\u001b[0m \u001b[1m\u001b[94m|\u001b[0m \u001b[1m\u001b[92m|\u001b[0m         id: KyberPreKeyId,\n \u001b[1m\u001b[94m56\u001b[0m \u001b[1m\u001b[94m|\u001b[0m \u001b[1m\u001b[92m|\u001b[0m         signing_key: &PrivateKey,\n \u001b[1m\u001b[94m57\u001b[0m \u001b[1m\u001b[94m|\u001b[0m \u001b[1m\u001b[92m|\u001b[0m     ) -> Result<KyberPreKeyRecord> {\n    \u001b[1m\u001b[94m|\u001b[0m \u001b[1m\u001b[92m|__________________________________^\u001b[0m\n    \u001b[1m\u001b[94m= \u001b[0m\u001b[1mhelp\u001b[0m: items from traits can only be used if the trait is in scope\n\u001b[1m\u001b[96mhelp\u001b[0m: there is a method `serialize` with a similar name, but with different arguments\n   \u001b[1m\u001b[94m--> \u001b[0m/Users/jasonconigliari/.cargo/git/checkouts/libsignal-2a193a9867decbc4/4cd2c50/rust/protocol/src/state/signed_prekey.rs:76:5\n    \u001b[1m\u001b[94m|\u001b[0m\n \u001b[1m\u001b[94m76\u001b[0m \u001b[1m\u001b[94m|\u001b[0m     fn serialize(&self) -> Result<Vec<u8>> {\n    \u001b[1m\u001b[94m|\u001b[0m     \u001b[1m\u001b[96m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\u001b[0m\n\u001b[1m\u001b[96mhelp\u001b[0m: trait `GenericSignedPreKey` which provides `deserialize` is implemented but not in scope; perhaps you want to import it\n    \u001b[1m\u001b[94m|\u001b[0m\n  \u001b[1m\u001b[94m6\u001b[0m \u001b[92m+ use libsignal_protocol::GenericSignedPreKey;\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"no method named `as_ref` found for struct `DeviceId` in the current scope","code":{"code":"E0599","explanation":"This error occurs when a method is used on a type which doesn't implement it:\n\nErroneous code example:\n\n```compile_fail,E0599\nstruct Mouth;\n\nlet x = Mouth;\nx.chocolate(); // error: no method named `chocolate` found for type `Mouth`\n               //        in the current scope\n```\n\nIn this case, you need to implement the `chocolate` method to fix the error:\n\n```\nstruct Mouth;\n\nimpl Mouth {\n    fn chocolate(&self) { // We implement the `chocolate` method here.\n        println!(\"Hmmm! I love chocolate!\");\n    }\n}\n\nlet x = Mouth;\nx.chocolate(); // ok!\n```\n"},"level":"error","spans":[{"file_name":"src/stores.rs","byte_start":9538,"byte_end":9544,"line_start":216,"line_end":216,"column_start":62,"column_end":68,"is_primary":true,"text":[{"text":"        format!(\"{}:{}\", address.name(), address.device_id().as_ref())","highlight_start":62,"highlight_end":68}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}],"children":[{"message":"there is a method `classify_ref` with a similar name","code":null,"level":"help","spans":[{"file_name":"src/stores.rs","byte_start":9538,"byte_end":9544,"line_start":216,"line_end":216,"column_start":62,"column_end":68,"is_primary":true,"text":[{"text":"        format!(\"{}:{}\", address.name(), address.device_id().as_ref())","highlight_start":62,"highlight_end":68}],"label":null,"suggested_replacement":"classify_ref","suggestion_applicability":"MaybeIncorrect","expansion":null}],"children":[],"rendered":null}],"rendered":"\u001b[1m\u001b[91merror[E0599]\u001b[0m\u001b[1m: no method named `as_ref` found for struct `DeviceId` in the current scope\u001b[0m\n   \u001b[1m\u001b[94m--> \u001b[0msrc/stores.rs:216:62\n    \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m216\u001b[0m \u001b[1m\u001b[94m|\u001b[0m         format!(\"{}:{}\", address.name(), address.device_id().as_ref())\n    \u001b[1m\u001b[94m|\u001b[0m                                                              \u001b[1m\u001b[91m^^^^^^\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[96mhelp\u001b[0m: there is a method `classify_ref` with a similar name\n    \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m216\u001b[0m \u001b[91m- \u001b[0m        format!(\"{}:{}\", address.name(), address.device_id().\u001b[91mas_ref\u001b[0m())\n\u001b[1m\u001b[94m216\u001b[0m \u001b[92m+ \u001b[0m        format!(\"{}:{}\", address.name(), address.device_id().\u001b[92mclassify_ref\u001b[0m())\n    \u001b[1m\u001b[94m|\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"no method named `as_ref` found for struct `DeviceId` in the current scope","code":{"code":"E0599","explanation":"This error occurs when a method is used on a type which doesn't implement it:\n\nErroneous code example:\n\n```compile_fail,E0599\nstruct Mouth;\n\nlet x = Mouth;\nx.chocolate(); // error: no method named `chocolate` found for type `Mouth`\n               //        in the current scope\n```\n\nIn this case, you need to implement the `chocolate` method to fix the error:\n\n```\nstruct Mouth;\n\nimpl Mouth {\n    fn chocolate(&self) { // We implement the `chocolate` method here.\n        println!(\"Hmmm! I love chocolate!\");\n    }\n}\n\nlet x = Mouth;\nx.chocolate(); // ok!\n```\n"},"level":"error","spans":[{"file_name":"src/stores.rs","byte_start":9743,"byte_end":9749,"line_start":221,"line_end":221,"column_start":63,"column_end":69,"is_primary":true,"text":[{"text":"        format!(\"{}:{}:{}\", sender.name(), sender.device_id().as_ref(), distribution_id)","highlight_start":63,"highlight_end":69}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}],"children":[{"message":"there is a method `classify_ref` with a similar name","code":null,"level":"help","spans":[{"file_name":"src/stores.rs","byte_start":9743,"byte_end":9749,"line_start":221,"line_end":221,"column_start":63,"column_end":69,"is_primary":true,"text":[{"text":"        format!(\"{}:{}:{}\", sender.name(), sender.device_id().as_ref(), distribution_id)","highlight_start":63,"highlight_end":69}],"label":null,"suggested_replacement":"classify_ref","suggestion_applicability":"MaybeIncorrect","expansion":null}],"children":[],"rendered":null}],"rendered":"\u001b[1m\u001b[91merror[E0599]\u001b[0m\u001b[1m: no method named `as_ref` found for struct `DeviceId` in the current scope\u001b[0m\n   \u001b[1m\u001b[94m--> \u001b[0msrc/stores.rs:221:63\n    \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m221\u001b[0m \u001b[1m\u001b[94m|\u001b[0m         format!(\"{}:{}:{}\", sender.name(), sender.device_id().as_ref(), distribution_id)\n    \u001b[1m\u001b[94m|\u001b[0m                                                               \u001b[1m\u001b[91m^^^^^^\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[96mhelp\u001b[0m: there is a method `classify_ref` with a similar name\n    \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m221\u001b[0m \u001b[91m- \u001b[0m        format!(\"{}:{}:{}\", sender.name(), sender.device_id().\u001b[91mas_ref\u001b[0m(), distribution_id)\n\u001b[1m\u001b[94m221\u001b[0m \u001b[92m+ \u001b[0m        format!(\"{}:{}:{}\", sender.name(), sender.device_id().\u001b[92mclassify_ref\u001b[0m(), distribution_id)\n    \u001b[1m\u001b[94m|\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"aborting due to 8 previous errors; 1 warning emitted","code":null,"level":"error","spans":[],"children":[],"rendered":"\u001b[1m\u001b[91merror\u001b[0m\u001b[1m: aborting due to 8 previous errors; 1 warning emitted\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"Some errors have detailed explanations: E0308, E0599.","code":null,"level":"failure-note","spans":[],"children":[],"rendered":"\u001b[1mSome errors have detailed explanations: E0308, E0599.\u001b[0m\n"}
{"$message_type":"diagnostic","message":"For more information about an error, try `rustc --explain E0308`.","code":null,"level":"failure-note","spans":[],"children":[],"rendered":"\u001b[1mFor more information about an error, try `rustc --explain E0308`.\u001b[0m\n"}
