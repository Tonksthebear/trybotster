<div class="min-h-[calc(100vh-8rem)]">
  <%# Header %>
  <div class="border-b border-zinc-800 bg-zinc-900/50">
    <div class="max-w-4xl mx-auto px-4 py-6">
      <h1 class="text-2xl font-bold text-zinc-100">Hubs</h1>
      <p class="text-sm text-zinc-500 mt-1">
        Active CLI instances running on your machines
      </p>
    </div>
  </div>

  <%# Hub List %>
  <div class="max-w-4xl mx-auto px-4 py-6">
    <% if @hubs.any? %>
      <div class="space-y-3">
        <% @hubs.each do |hub| %>
          <%= link_to hub_path(hub.identifier), class: "block bg-zinc-900 border border-zinc-800 hover:border-zinc-700 rounded-lg p-4 transition-colors group" do %>
            <div class="flex items-start justify-between">
              <div class="flex-1 min-w-0">
                <div class="flex items-center gap-3 mb-2">
                  <%# Status indicator %>
                  <% if hub.active? %>
                    <span class="flex-shrink-0 w-2.5 h-2.5 rounded-full bg-emerald-500 animate-pulse"></span>
                  <% else %>
                    <span class="flex-shrink-0 w-2.5 h-2.5 rounded-full bg-zinc-600"></span>
                  <% end %>

                  <h2 class="text-lg font-mono text-zinc-200 group-hover:text-cyan-400 transition-colors truncate">
                    <%= hub.identifier.truncate(32) %>
                  </h2>

                  <% if hub.e2e_enabled? %>
                    <span class="inline-flex items-center gap-1 px-1.5 py-0.5 text-xs font-medium bg-emerald-500/10 text-emerald-400 rounded flex-shrink-0">
                      <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/>
                      </svg>
                      E2E
                    </span>
                  <% end %>
                </div>

                <div class="flex items-center gap-4 text-sm text-zinc-500">
                  <% if hub.repo.present? %>
                    <span class="flex items-center gap-1.5">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
                      </svg>
                      <%= hub.repo %>
                    </span>
                  <% end %>

                  <span class="flex items-center gap-1.5">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                    <%= hub.hub_agents.count %> agents
                  </span>

                  <span class="flex items-center gap-1.5 text-zinc-600">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <%= time_ago_in_words(hub.last_seen_at) %> ago
                  </span>
                </div>

                <% if hub.device %>
                  <div class="mt-2 text-xs font-mono text-zinc-700 truncate">
                    <%= hub.device.name %> &mdash; <%= hub.device.fingerprint %>
                  </div>
                <% end %>
              </div>

              <%# Arrow %>
              <div class="flex-shrink-0 ml-4">
                <svg class="w-5 h-5 text-zinc-600 group-hover:text-cyan-400 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
              </div>
            </div>
          <% end %>
        <% end %>
      </div>
    <% else %>
      <div class="text-center py-16">
        <svg class="w-16 h-16 text-zinc-700 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
        </svg>
        <h3 class="text-lg font-medium text-zinc-400 mb-2">No active hubs</h3>
        <p class="text-sm text-zinc-600 max-w-md mx-auto">
          Start the Botster CLI on your machine to create a hub. Run <code class="px-1.5 py-0.5 bg-zinc-800 rounded font-mono text-xs">botster-hub</code> in your project directory.
        </p>
      </div>
    <% end %>
  </div>
</div>
